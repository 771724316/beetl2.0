<% var title = {%>
    编辑文章 - ${article.title!}
<%};%>
<%var script={%>
    <script type="text/javascript">
        $(function(){
            $(".saveBtn").click(function(){
                Common.post('/daily/admin/article/save', {
                    id: $("#saveForm input[name='id']").val(),
                    title: $("#saveForm input[name='title']").val(),
                    author: $("#saveForm input[name='author']").val(),
                    imgUrl: $("#saveForm input[name='imgUrl']").val(),
                    content: UE.getEditor('container').getContent(),
                    tags: $("#saveForm input[name='tags']").val()
                }, function(){
                    Common.go("/daily/admin/article/list");
                });
            });
            Common.back($(".backBtn"));
            HuWhy.Buttons.btnRefresh();
            UE.Editor.prototype._bkGetActionUrl = UE.Editor.prototype.getActionUrl;
            UE.Editor.prototype.getActionUrl = function(action) {
                if (action == 'uploadimage' || action == 'uploadscrawl') {
                    return '/ueditor';
                } else {
                    return this._bkGetActionUrl.call(this, action);
                }
            }
        });
    </script>
<%};%>
<%var path={%>
    <a href="/daily/admin/article/list">文章管理</a> &raquo; 编辑文章 - ${article.title!}
<%};%>
<%layout("beetl.txt",{titleContent:title,myScript:script,topPath:path}){ %>
<form id="saveForm" action="/daily/admin/article/save" method="post">
    <input type="hidden" name="id" value="${article.id!0}"/>
    <table class="input">
        <tr>
            <th>
                标题:
            </th>
            <td colspan="3">
                <input type="text" name="title" style="width: 500px;" value="${article.title!}" />
            </td>
        </tr>
        <tr>
            <th>作者:</th>
            <td>
                <input type="text" name="author" maxlength="30" value="${article.author!}"/>
            </td>
            <th>
                图片路径:
            </th>
            <td>
                <input type="text" name="imgUrl" maxlength="100" value="${article.imgUrl!}"/>
            </td>
        </tr>
        <tr>
            <th>内容:</th>
            <td colspan="3">
                <script id="container" name="content" type="text/plain">
                    ${article.content!}
                </script>
                <!-- 配置文件 -->
                <script type="text/javascript" src="/ueditor/ueditor.config.js"></script>
                <!-- 编辑器源码文件 -->
                <script type="text/javascript" src="/ueditor/ueditor.all.js"></script>
                <script type="text/javascript" src="/ueditor/addCustomizeCombox.js"></script>
                <script type="text/javascript" src="/ueditor/addCustomizeButton.js"></script>
                <!-- 实例化编辑器 -->
                <script type="text/javascript">
                    var ue = UE.getEditor('container', {
                        toolbars:[[
                            'forecolor', //字体颜色
                            'bold', //加粗
                            'italic', //斜体
                            'blockquote', //引用
                            'fontfamily', //字体
                            'fontsize', //字号
                            'link', //超链接
                                'insertimage',
                                'simpleupload',
                            'insertvideo', //视频
                            'justifyleft', //居左对齐
                            'justifyright', //居右对齐
                            'justifycenter', //居中对齐
                            'justifyjustify', //两端对齐
                            'insertorderedlist', //有序列表
                            'insertunorderedlist', //无序列表
                            'removeformat'
                        ]],
                        initialFrameWidth: 650,
                        initialFrameHeight: 550
                    });
                </script>
            </td>
        </tr>
        <tr>
            <th>标签</th>
            <td colspan="3"><input type="input" name="tags" value="${article.tags!}" /></td>
        </tr>
        <tr>
            <td>
                &nbsp;
            </td>
            <td>
                <input id="btnSave" type="button" class="button" value="确&nbsp;&nbsp;定"/>
                <input id="btnBack" type="button" class="button" value="返&nbsp;&nbsp;回"/>
                <input type="button" class="button refreshBtn" id="refreshButton" value="刷&nbsp;&nbsp;新"/>
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
    </table>
</form>
<%};%>